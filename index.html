<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Saravana Bhavan </title>
    <link rel="stylesheet" href="CSS/style.css">
</head>
<body>
    <header>
        <div style="position: relative; text-align: center;">
            <img id="banner" src="Images/Banner.png" alt="Saravana Bhavan Banner">
            <h1 id="banner-title">Saravana Bhavan</h1>
        </div>
        <nav class ="Menu">
            <ul> 
                <li><a href="Pages/AboutUs.html">About Us</a></li>
                <li><a href="Pages/Location.html">Find Us</a></li>
                <li><a href="Pages/OurWhy.html">Our Why</a></li>
                <li><a href="Pages/WhyUs.html"> Why Us</a></li>
                <li><a href="Pages/Review.html">What our Customers Say</a></li>

            </ul>
        </nav>
    </header>
    <section class="hero">
        <div class="carousel-container">
            <div class="carousel-slide active">
                <img src="HeroCarosel/Deca Cover Photo.png" alt="Saravana Bhavan">
                <div class="carousel-overlay"></div>
            </div>
            <div class="carousel-slide">
                <img src="HeroCarosel/Screenshot 2026-01-30 192354.png" alt="Delicious Food">
                <div class="carousel-overlay"></div>
            </div>
            <div class="carousel-slide">
                <img src="HeroCarosel/Screenshot 2026-01-30 192336.png" alt="Our Restaurant">
                <div class="carousel-overlay"></div>
            </div>
            <div class="carousel-slide">
                <img src="HeroCarosel/Screenshot 2026-01-30 192314.png" alt="Authentic Cuisine">
                <div class="carousel-overlay"></div>
            </div>
            <div class="hero-content">
                <h1 id="Hero-Header">Welcome to Saravana Bhavan</h1>
                <p id="Slogan-Hero">World's No.1 South Indian Restaurant Chain</p>
                <button id="OrderNow" onclick="onOrderButtonClick()">Order Now</button>
            </div>
            <button class="carousel-control prev" onclick="moveCarousel(-1)">&#10094;</button>
            <button class="carousel-control next" onclick="moveCarousel(1)">&#10095;</button>
            <div class="carousel-indicators">
                <span class="indicator active" onclick="goToSlide(0)"></span>
                <span class="indicator" onclick="goToSlide(1)"></span>
                <span class="indicator" onclick="goToSlide(2)"></span>
                <span class="indicator" onclick="goToSlide(3)"></span>
            </div>
        </div>
    </section>
    
    <!-- Main Content Section -->
    <section id="article-content">
        <div class="container">
            <h2 style="color: #007749;">Welcome to Durban - Experience Tradition and Authenticity</h2>
            
            <div class="article-content">
                <div class="map-embed">
                    <img src="Images/DurbanMap.jpg" alt="Map of Durban, South Africa">
                </div>
                
                <p>Nestled in the vibrant heart of Durban, South Africa, Saravana Bhavan brings the authentic flavors of South India to one of the world's most culturally diverse cities. Our restaurant stands as a testament to the rich culinary heritage that has made us the world's leading South Indian restaurant chain.</p>
                
                <p>Durban, known for its warm subtropical climate and bustling multicultural atmosphere, provides the perfect backdrop for our traditional dining experience. The city's unique blend of Indian, African, and European influences creates an environment where authentic South Indian cuisine not only thrives but celebrates its roots among a community that deeply appreciates culinary excellence.</p>
                
                <p>Located in this coastal paradise, our restaurant serves as a culinary bridge, connecting generations through time-honored recipes and cooking techniques passed down through decades. From our signature dosas to our aromatic filter coffee, every dish tells a story of tradition, authenticity, and the unwavering commitment to quality that has made Saravana Bhavan a household name across the globe.</p>
                
                <p>Whether you're a local resident or a visitor exploring the beauty of Durban, we invite you to experience the warmth of South Indian hospitality and discover why food lovers from around the world continue to make Saravana Bhavan their destination of choice for authentic vegetarian cuisine.</p>
            </div>
        </div>
    </section>
    
    <footer id="footer">
        <p style="text-align: center;">Washington DECA IBP</p>
        <p style="text-align: center;">Made by</p>
        <p style="text-align: center;">Piyush Chandra Kancharapu Ishan Hemanand Arjun Rajkumar</p>
    </footer>

    <!-- SBuddy Floating Button -->
    <div id="sbuddy-toggle" class="sbuddy-toggle">
        <span>SB</span>
    </div>

    <!-- SBuddy Chat Popup -->
    <div id="sbuddy-popup" class="sbuddy-popup">
        <div class="chatbot-container">
            <div class="chatbot-header">
                <div class="chatbot-avatar">ü§ñ</div>
                <div class="chatbot-info">
                    <h3>SBuddy</h3>
                    <p>AI Food Assistant</p>
                </div>
                <button class="close-chat" onclick="closeSBuddy()">‚úï</button>
            </div>

            <div class="chatbot-messages" id="sbuddy-messages">
                <div class="message">
                    <div class="message-bot">üëã Hey there! I'm SBuddy, your food recommendation buddy!</div>
                </div>
                <div class="message">
                    <div class="message-bot">üçΩÔ∏è Tell me... what kind of mood are you in? Are you feeling spicy, light, or adventurous today?</div>
                </div>
            </div>

            <div class="chatbot-input-area">
                <div class="input-wrapper">
                    <input type="text" id="sbuddy-input" class="chat-input" placeholder="Ask SBuddy for food recommendations...">
                    <button class="send-btn" onclick="sendMessage()">‚Üí</button>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // SBuddy Groq API Configuration
        const GROQ_API_KEY = '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';
        const GROQ_API_URL = 'https://api.groq.com/openai/v1/chat/completions';

        const menuItems = [
            { name: 'Masala Dosa', price: 'R89.99', description: 'Crispy rice crepe filled with spiced potato and lentil curry' },
            { name: 'Sambar', price: 'R59.99', description: 'Tangy lentil-based vegetable stew with aromatic spices' },
            { name: 'Idli & Chutney', price: 'R49.99', description: 'Soft steamed rice cakes with homemade coconut and spice chutneys' },
            { name: 'Chole Bhature', price: 'R79.99', description: 'Fluffy fried bread with spiced chickpea curry' },
            { name: 'Vada Sambar', price: 'R69.99', description: 'Crispy lentil fritters served with warm sambar' },
            { name: 'Biryani', price: 'R99.99', description: 'Fragrant basmati rice cooked with vegetables and spices' }
        ];

        const systemPrompt = `You are SBuddy, a friendly and helpful AI food recommendation assistant for Saravana Bhavan, a premium South Indian restaurant in Durban, South Africa. Your ONLY purpose is to help customers select food from our menu.

Available Menu Items:
${menuItems.map(item => `- ${item.name} (${item.price}): ${item.description}`).join('\n')}

CRITICAL GUIDELINES:
1. ONLY respond to food-related questions and meal recommendations
2. If the user asks anything unrelated to food, ordering, or our menu, politely respond: "I'm SBuddy, your food recommendation assistant! I'm here specifically to help you choose delicious dishes from our menu. What kind of flavors are you in the mood for today?"
3. Do NOT engage in general conversation, personal questions, or non-food topics
4. Do NOT answer questions about politics, weather, math, coding, or anything outside of food recommendations
5. Make personalized recommendations based on their food preferences:
   - Spicy mood ‚Üí Masala Dosa or Chole Bhature
   - Light appetite ‚Üí Idli & Chutney or Sambar
   - Very hungry ‚Üí Biryani
   - Crispy preference ‚Üí Vada Sambar or Masala Dosa
6. Always explain WHY you're recommending something
7. Keep responses concise (2-3 sentences max)
8. Never recommend anything not on the menu
9. Be enthusiastic about South Indian cuisine!
10. If they greet you or start casually, immediately steer to food: "Hey! Ready to explore some amazing South Indian flavors? What sounds good to you today?"

Remember: You are a food ordering assistant ONLY. Redirect all non-food topics back to the menu.`;

        let conversationHistory = [];

        // Toggle SBuddy popup
        function toggleSBuddy() {
            const popup = document.getElementById('sbuddy-popup');
            const toggle = document.getElementById('sbuddy-toggle');
            
            if (popup.classList.contains('show')) {
                popup.classList.remove('show');
                toggle.classList.remove('active');
            } else {
                popup.classList.add('show');
                toggle.classList.add('active');
                document.getElementById('sbuddy-input').focus();
            }
        }

        function closeSBuddy() {
            const popup = document.getElementById('sbuddy-popup');
            const toggle = document.getElementById('sbuddy-toggle');
            popup.classList.remove('show');
            toggle.classList.remove('active');
        }

        // Close popup when clicking outside
        document.addEventListener('click', function(event) {
            const popup = document.getElementById('sbuddy-popup');
            const toggle = document.getElementById('sbuddy-toggle');
            
            if (popup.classList.contains('show') && 
                !popup.contains(event.target) && 
                !toggle.contains(event.target)) {
                closeSBuddy();
            }
        });

        // Add click event to toggle button
        document.getElementById('sbuddy-toggle').addEventListener('click', toggleSBuddy);

        // Send message on Enter key
        document.getElementById('sbuddy-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        async function sendMessage() {
            const chatInput = document.getElementById('sbuddy-input');
            const messagesContainer = document.getElementById('sbuddy-messages');
            const userMessage = chatInput.value.trim();

            if (!userMessage) return;

            // Clear input
            chatInput.value = '';

            // Add user message to display
            const userMessageDiv = document.createElement('div');
            userMessageDiv.className = 'message';
            userMessageDiv.innerHTML = `<div class="message-user">${escapeHtml(userMessage)}</div>`;
            messagesContainer.appendChild(userMessageDiv);

            // Add user message to conversation history
            conversationHistory.push({
                role: 'user',
                content: userMessage
            });

            // Scroll to bottom
            messagesContainer.scrollTop = messagesContainer.scrollHeight;

            // Show typing indicator
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message';
            typingDiv.innerHTML = `<div class="message-bot">‚úì SBuddy is thinking...</div>`;
            messagesContainer.appendChild(typingDiv);

            try {
                const payload = {
                    model: 'llama-3.3-70b-versatile',
                    messages: [
                        {
                            role: 'system',
                            content: systemPrompt
                        },
                        ...conversationHistory
                    ],
                    temperature: 0.7,
                    max_tokens: 150,
                };

                const response = await fetch(GROQ_API_URL, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${GROQ_API_KEY}`,
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    let errorMsg = `API error: ${response.status}`;
                    try {
                        const errorData = await response.json();
                        if (errorData.error?.message) {
                            errorMsg += ` - ${errorData.error.message}`;
                        }
                    } catch (e) {
                        console.log('Could not parse error response');
                    }
                    console.error('Groq API Error:', errorMsg);
                    throw new Error(errorMsg);
                }

                const data = await response.json();
                
                if (!data.choices || !data.choices[0] || !data.choices[0].message) {
                    console.error('Invalid response structure:', data);
                    throw new Error('Invalid API response structure');
                }
                
                const botMessage = data.choices[0].message.content;

                // Remove typing indicator
                typingDiv.remove();

                // Add bot response
                const botMessageDiv = document.createElement('div');
                botMessageDiv.className = 'message';
                botMessageDiv.innerHTML = `<div class="message-bot">${escapeHtml(botMessage)}</div>`;
                messagesContainer.appendChild(botMessageDiv);

                // Add to conversation history
                conversationHistory.push({
                    role: 'assistant',
                    content: botMessage
                });

                // Scroll to bottom
                messagesContainer.scrollTop = messagesContainer.scrollHeight;

            } catch (error) {
                console.error('Detailed Error:', error);
                typingDiv.remove();
                const errorMessageDiv = document.createElement('div');
                errorMessageDiv.className = 'message';
                errorMessageDiv.innerHTML = `<div class="message-bot">‚ö†Ô∏è ${error.message || 'Sorry, I encountered an error. Please try again!'}</div>`;
                messagesContainer.appendChild(errorMessageDiv);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }
        }

        function escapeHtml(text) {
            const map = {
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#039;'
            };
            return text.replace(/[&<>"']/g, m => map[m]);
        }
    </script>
</body>
</html> 